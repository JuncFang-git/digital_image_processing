# 1.1 数字图像

## 1.1.3 彩色图像

- **RGB**被成为添加模式，主要用于发光设备，如显示器。图像的形成过程是：从黑色开始，逐渐添加每种基色的颜色值，从而产生普通的颜色。
- **CMYK**被称为削减模式，主要用于打印机，感光材料等。它使用四种基色，分别是青色(Cyan)、品红(Magenta)、黄色(Yellow)和黑色(Black)。其颜色形成过程为：从白色开始，逐渐削减4种基色的的颜色值。
- 如果图像中每个像素直接用RGB组合值表示，则称之为**真彩色图**。**调色板**技术是指在调色板中定义一些颜色，表示图像时只需记录调色表上的索引就行，这样大大减小了图像的储存大小。

## 1.3 BMP图像文件

BMP文件通常都是以未压缩方式存储的，因此最适合进行图像处理。压缩过的图像是无法直接进行数字化处理的，如JPEG等图像需要经过解压缩（解码）才能进行处理。

## 1.7 图像的点运算

### 1.7.1 图像的反色

图像的反色即颠倒原来颜色值的大小，能形成底片效果。表达式如下：

$$
Pixel[pos] = 255 - Pixel[pos]
$$

### 1.7.2 灰度图阈值变化

阈值化是一种灰度图二值化的方法，二值图在很多领域都有用到，所以它可以被看作是一种预处理。计算表达式如下：

$$
f(x) = 
\begin{cases}
0, & x < T \\
255, & x \geq T \\
\end{cases}
$$

### 1.7.3 灰度拉伸（对比度拉伸）

一幅图，由于成像时光照不足，使得整幅图偏暗；或者成像时光照过强，使得整幅图偏亮。称这种情况为低对比度，即灰度都挤在一起，没有拉开。这时需要使用灰度拉伸的方法来处理，灰度拉伸就是将灰度范围拉开，亮的更亮，暗的更暗。灰度拉伸的变换函数为：

$$
f(x) = 
\begin{cases}
\frac{y_1}{x_1}x & x < x_1 \\
\frac{y_2-y_1}{x_2-x_1}(x-x_1) + y_1 & x_1<x<x_2 \\
\frac{255-y_2}{255-x_2}(x-x_2) + y_2 & x>x_2
\end{cases}
$$

其中$x_1, y_1$表示下图A点坐标，$x_2, y_2$表示下图B点坐标。变换后根据三条线段的斜率对三个区域的灰度值进行了映射。
![img](http://image.sciencenet.cn/album/201210/11/113023uz77jx9xtur9b6zl.jpg)

<center>Figure1 灰度拉伸函数</center>

### 1.7.4 灰度均衡化（直方图均衡化）

拍摄过程中如果天气、光影比较差，会出现曝光不均匀的情况。此时，图像的灰度值主要分布在某些特定的强度区域，大块的高亮区和大块的黑暗区相互分离，影响了观赏。处理这种情况可以采用灰度均衡的方法，将灰度的统计分布拉伸到整个灰度区域（一般为0-255）。
https://zhuanlan.zhihu.com/p/44918476
这里介绍直方图均衡化(Histogram Equalization)的基本原理。假设我们现在有一个图像A，其直方图分布为$H_A(D)$ ，我们想利用一个单调非线性映射 $f:R→R$ 将图像A变为图像B，即对图像A中每个像素点施加 $f$ 变换，图像B的直方图分布为 $H_B(D)$ 。整个过程可以按照Figure2的图示来说明：图中右下方是A图像的灰度直方图分布(便于画图，这里画作连续分布)，图中右上方是单调非线性变换函数 f ，左上方式得到的图像B的直方图分布，其中有 DB=f(DA) ， DB+ΔDB=f(DA+ΔDA) 。即可以理解 f 的作用是将A图像里面像素点灰度为 DA 的全部变为 DB ，那么则有： ∫DADA+ΔDAHA(D)dD=∫DBDB+ΔDBHB(D)dD

上面公式可以理解为对应区间内像素点总数不变。为了实现直方图均衡化，特殊地有： ∫0DAHA(D)dD=∫0DBHB(D)dD

因为目标是直方图均匀分布，那么理想的 HB(D)=A0L ， A0 是 像素点个数， L 是灰度级深度，通常取256。那么得到：

∫0DAHA(D)dD=A0DBL=A0f(DA)L
那么 ， f 就可以求出来了，结果为：

f(DA)=LA0∫0DAHA(D)dD

离散形式为：

f(DA)=LA0∑u=0DAHA(u)

![](https://pic4.zhimg.com/80/v2-f6e89ba884fdb32d3aae4f2d19a4688f_1440w.webp)

<center>Figure2 直方图均衡化示意图</center>

